<!DOCTYPE html>
<html>
  <head>
    <title>Function Practice</title>
    <link rel="stylesheet" href="./app.css" />
  </head>
  <body>

    <script src="http://code.jquery.com/jquery-2.1.0.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min.js"></script>
    <script src="./app.js"></script>

    <script>
      $(document).ready(function() {

        function wordCount(fragment) {
          if (!fragment) {
            return 0;
          }
          return fragment.trim().split(/\s+/).length;
        }
        createExample('Word Count', {
          description: 'Create a function that returns the number of words in \
            a fragment of text',
          implementation: wordCount,
          validation: [
            {
              input: 'one two three',
              output: 3
            },
            {
              input: '  ignore  spaces  ',
              output: 2
            },
            {
              input: null,
              output: 0
            }
          ]
        });

        function reverseText(phrase) {
          // create a variable that holds the reversed phrase
          var esarhp = "";
          //iterate over phrase starting at the end and rebuild the phrase one character at a time in reverse
          if (phrase === null) {
            return null;
          }
          for (var i = phrase.length - 1; i >= 0; i--) {
            esarhp += phrase[i];
          }
          return esarhp;
        }

        createExample('Reverse Text', {
          description: 'Create a function that reverses the characters in \
            a string',
          implementation: reverseText,
          validation: [
            {
              input: 'test value',
              output: 'eulav tset'
            },
            {
              input: null,
              output: null
            },
            {
              input: '',
              output: ''
            }
          ]
        });

        function changeMaker(dollars) {
          // array that stores name and value of bill or coin

          var monies = [
            ['hundreds', 100],
            ['fifties', 50],
            ['twenties', 20],
            ['tens', 10],
            ['fives', 5],
            ['ones', 1],
            ['quarters', .25],
            ['dimes', .10],
            ['nickels', .05],
            ['pennies', .01]
          ];

          // store bill or coin name and quantity
          var change = {};

          // store the value of the remainder after dividing by bill or coin value

          var remainder = dollars;

          //iterate over the array, dividing by bill or coin value and storing quantity of bill or coin along with bill or coin name in change

          for (i = 0; i < monies.length; i++) {
            var money = monies[i];
            var value = money[1];
            var quantity = Math.floor(remainder / value);
            if (quantity > 0){
              var billName = money[0];
              change[billName] = quantity;
            }
            remainder = remainder - quantity * value;
          }
          return change;
        }

        createExample('Tender Change', {
          description: 'Write a function that given a dollar amount returns \
            the change in bills and coins. For instance, given \
            <code>7.23</code> it should return: \
            <pre>{ fives: 1, ones: 2, dimes: 2, pennies: 3 }</pre>',
          implementation: changeMaker,
          validation: [
            {
              input: 7.23,
              output: { fives: 1, ones: 2, dimes: 2, pennies: 3 }
            }
          ]
        });

        function pluralize(noun, number) {
          // if number is 1, don't add an s; otherwise, add an s
          if (number !== 1) {
            noun += 's';
          }
          return number + ' ' + noun;
        }

        createExample('The Pluralizer', {
          description: 'Write a function that takes two arguments, a noun \
            and a number, and returns the number and the noun in pluralized \
            form (for instance, "1 dog", "5 cats")',
          implementation: pluralize,
          validation: [
            {
              input: ['dog', 1],
              output: '1 dog'
            },
            {
              input: ['cat', 5],
              output: '5 cats'
            }
          ]
        });

        var movieList = [
          'The Shawshank Redemption,1994,1043071',
          'The Godfather,1972,732416',
          'The Godfather: Part II,1974,474640',
          'Pulp Fiction,1994,806431',
          'The Dark Knight,2008,1017508',
          '12 Angry Men,1957,255846',
          'Schindler\'s List,1993,528900',
          'The Lord of the Rings: The Return of the King,2003,738931',
          'Fight Club,1999,791186',
          'Star Wars: Episode V - The Empire Strikes Back,1980,503348'
        ];

        // for validation
        var parsedMovies = [
          { name: '12 Angry Men', year: 1957, votes: 255846 }, 
          { name: 'The Godfather', year: 1972, votes: 732416 }, 
          { name: 'The Godfather: Part II', year: 1974, votes: 474640 }, 
          { name: 'Star Wars: Episode V - The Empire Strikes Back', year: 1980, votes: 503348 }, 
          { name: 'Schindler\'s List', year: 1993, votes: 528900 }, 
          { name: 'The Shawshank Redemption', year: 1994, votes: 1043071 }, 
          { name: 'Pulp Fiction', year: 1994, votes: 806431 }, 
          { name: 'Fight Club', year: 1999, votes: 791186 }, 
          { name: 'The Lord of the Rings: The Return of the King', year: 2003, votes: 738931 }, 
          { name: 'The Dark Knight', year: 2008, votes: 1017508 }
        ]




        // splits the movie list values into name, year and votes
        // takes an array of strings containing values delimited by commas
        // returns array of movie objects sorted by year

        function parseMovies(movies) {
          
          if(typeof(movies)==='undefined') {
            movies = movieList;
          }
        
        // stores parsed and sorted movie objects

        var movieObjects = [];

         for (var i = 0; i < movies.length; i++) {
            var splitMovie = movies[i].split(',');
            movieObjects.push({
              name: splitMovie[0],
              year: splitMovie[1],
              votes: splitMovie[2]
            });
          }
          return movieObjects.sort(sortFunction);
        }

        function sortFunction(a,b) {
          return a.year - b.year;
        }

        // generates validation output

        function validationOutput(movieObjects) {
          for (var j = 0; j < movieObjects.length; j++) {
              var movie = movieObjects[j];
              document.write("{ name: '" + movie.name + "', year: " + movie.year + ", votes: " + movie.votes + " }, <br/>");
            }
          }



        createExample('Movie Parsing', {
          description: "Given the following comma separated list of IMDb top \
            rated movies: <pre>var movieList = " +
            JSON.stringify(movieList, null, '  ') +
            "</pre> create a function that splits the values into the title, \
            year, and number of votes and returns a list of movie objects \
            sorted by year.",
          implementation: parseMovies,
          validation: [
            {
              input: movieList,
              output: parsedMovies
            },
          ]
        });
      });
    </script>

  </body>
</html>
